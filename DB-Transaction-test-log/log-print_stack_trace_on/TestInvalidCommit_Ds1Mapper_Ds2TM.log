2022-08-20 21:20:28.908 [main] INFO  DbUtil.restartDataSources(106) - druidDataSource.restart dataSource1
2022-08-20 21:20:28.908 [main] DEBUG DruidMonitorFilter.connection_close(128) - ### [关闭连接] connThreadId 111 自动提交
SqlSessionInfo{connectionHashCode='5cadc693', connThreadId=111, localPort=54354, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:28.908 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:47)
test.db.util.DbUtil.restartDataSources(DbUtil:109)
com.alibaba.druid.pool.DruidDataSource.restart(DruidDataSource:573)
com.alibaba.druid.pool.DruidDataSource.restart(DruidDataSource:586)
com.alibaba.druid.pool.DruidDataSource.close(DruidDataSource:2118)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl:114)
com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl:181)
test.db.druid_filter.filter.DruidMonitorFilter.connection_close(DruidMonitorFilter:134)

2022-08-20 21:20:28.908 [main] INFO  DbUtil.restartDataSources(106) - druidDataSource.restart dataSource2
2022-08-20 21:20:28.908 [main] DEBUG DruidMonitorFilter.connection_close(128) - ### [关闭连接] connThreadId 110 自动提交
SqlSessionInfo{connectionHashCode='139098f0', connThreadId=110, localPort=54353, dataSourceName='ds2', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:28.908 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:47)
test.db.util.DbUtil.restartDataSources(DbUtil:109)
com.alibaba.druid.pool.DruidDataSource.restart(DruidDataSource:573)
com.alibaba.druid.pool.DruidDataSource.restart(DruidDataSource:586)
com.alibaba.druid.pool.DruidDataSource.close(DruidDataSource:2118)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl:114)
com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl:181)
test.db.druid_filter.filter.DruidMonitorFilter.connection_close(DruidMonitorFilter:134)

2022-08-20 21:20:28.923 [Druid-ConnectionPool-Create-1620459733] DEBUG DruidMonitorFilter.connection_connectAfter(93) - ### [创建连接] connThreadId 112 自动提交
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='null', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:28.923 [Druid-ConnectionPool-Create-1620459733] DEBUG DruidMonitorFilter.selectProcessList(272) - 
processlist ID [112] USER [test] HOST [localhost:54355] DB [testdb] COMMAND [Query] INFO [select * from information_schema.processlist where id = CONNECTION_ID()]
2022-08-20 21:20:28.923 [Druid-ConnectionPool-Create-1620459733] INFO  CommonUtil.printStackTrace(59) - stack trace
com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource:2840)
com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource:1733)
com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource:1669)
com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl:150)
com.alibaba.druid.filter.FilterEventAdapter.connection_connect(FilterEventAdapter:40)
test.db.druid_filter.filter.DruidMonitorFilter.connection_connectAfter(DruidMonitorFilter:98)

2022-08-20 21:20:28.939 [main] DEBUG DruidMonitorFilter.dataSource_getConnection(71) - ### [从连接池借出连接] connThreadId 112 dataSourceName ds2
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:28.939 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:382)
org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport:595)
org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager:373)
org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager:400)
org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager:265)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:100)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:1399)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:1407)
com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl:5055)
test.db.druid_filter.filter.DruidMonitorFilter.dataSource_getConnection(DruidMonitorFilter:76)

2022-08-20 21:20:28.939 [main] DEBUG DruidMonitorFilter.connection_setAutoCommit(242) - ### [关闭自动提交] connThreadId 112 自动提交
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:28.939 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:382)
org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport:595)
org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager:373)
org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager:400)
org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager:287)
com.alibaba.druid.pool.DruidPooledConnection.setAutoCommit(DruidPooledConnection:740)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.setAutoCommit(ConnectionProxyImpl:429)
com.alibaba.druid.filter.FilterChainImpl.connection_setAutoCommit(FilterChainImpl:733)
test.db.druid_filter.filter.DruidMonitorFilter.connection_setAutoCommit(DruidMonitorFilter:253)

2022-08-20 21:20:28.954 [main] INFO  TransactionService.doOperate(112) - 是否开启事务 是
2022-08-20 21:20:28.954 [Druid-ConnectionPool-Create-1527152775] DEBUG DruidMonitorFilter.connection_connectAfter(93) - ### [创建连接] connThreadId 113 自动提交
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='null', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.017 [Druid-ConnectionPool-Create-1527152775] DEBUG DruidMonitorFilter.selectProcessList(272) - 
processlist ID [113] USER [test] HOST [localhost:54356] DB [testdb] COMMAND [Query] INFO [select * from information_schema.processlist where id = CONNECTION_ID()]
2022-08-20 21:20:29.017 [Druid-ConnectionPool-Create-1527152775] INFO  CommonUtil.printStackTrace(59) - stack trace
com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource:2840)
com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource:1733)
com.alibaba.druid.pool.DruidAbstractDataSource.createPhysicalConnection(DruidAbstractDataSource:1669)
com.alibaba.druid.filter.FilterChainImpl.connection_connect(FilterChainImpl:150)
com.alibaba.druid.filter.FilterEventAdapter.connection_connect(FilterEventAdapter:40)
test.db.druid_filter.filter.DruidMonitorFilter.connection_connectAfter(DruidMonitorFilter:98)

2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.dataSource_getConnection(71) - ### [从连接池借出连接] connThreadId 113 dataSourceName ds1
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.017 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:388)
org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor:123)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:163)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy:793)
org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy:218)
test.db.transaction.service.TransactionService$$FastClassBySpringCGLIB$$187f4c14.invoke(<generated>)
test.db.transaction.service.TransactionService.runByTransactionalDs2TM(TransactionService:89)
test.db.transaction.service.TransactionService.run(TransactionService:106)
test.db.transaction.service.TransactionService.doOperate(TransactionService:115)
com.sun.proxy.$Proxy41.selectForUpdate(Unknown Source)
org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy:52)
org.apache.ibatis.binding.MapperMethod.execute(MapperMethod:68)
org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate:163)
com.sun.proxy.$Proxy39.selectOne(Unknown Source)
org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate:358)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession:66)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession:102)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession:108)
org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor:77)
org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor:96)
org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor:137)
org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor:267)
org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor:59)
org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor:72)
org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor:279)
org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction:67)
org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction:81)
org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils:80)
org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils:117)
org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils:159)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:100)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:1399)
com.alibaba.druid.pool.DruidDataSource.getConnection(DruidDataSource:1407)
com.alibaba.druid.filter.FilterChainImpl.dataSource_connect(FilterChainImpl:5055)
test.db.druid_filter.filter.DruidMonitorFilter.dataSource_getConnection(DruidMonitorFilter:76)

2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(158) - ### [执行SQL语句] connThreadId 113 自动提交
select
        task_name, lock_flag, begin_time, end_time, process_info, now() as db_current_date
        from task_lock
        where task_name = ? for update
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(159) - 当前已开启事务
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(166) - @@@ 执行SQL语句的连接ID（MySQL服务线程ID）与开启事务时的不同 113@[ds1] 112@[ds2]
2022-08-20 21:20:29.017 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:388)
org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor:123)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:163)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy:793)
org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy:218)
test.db.transaction.service.TransactionService$$FastClassBySpringCGLIB$$187f4c14.invoke(<generated>)
test.db.transaction.service.TransactionService.runByTransactionalDs2TM(TransactionService:89)
test.db.transaction.service.TransactionService.run(TransactionService:106)
test.db.transaction.service.TransactionService.doOperate(TransactionService:115)
com.sun.proxy.$Proxy41.selectForUpdate(Unknown Source)
org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy:52)
org.apache.ibatis.binding.MapperMethod.execute(MapperMethod:68)
org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate:163)
com.sun.proxy.$Proxy39.selectOne(Unknown Source)
org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate:358)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession:66)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession:102)
org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession:108)
org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor:77)
org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor:96)
org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor:137)
org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor:267)
org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor:60)
org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler:73)
org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler:59)
com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement:497)
com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl:167)
com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl:3459)
com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter:438)
test.db.druid_filter.filter.DruidMonitorFilter.statementExecuteBefore(DruidMonitorFilter:177)

2022-08-20 21:20:29.017 [main] INFO  TransactionService.doOperate(116) - 查询到的数据 TaskLock{taskName='TEST_DB_TRANSACTION', lockFlag=1, beginTime=Sat Aug 20 21:20:28 CST 2022, endTime=null, dbCurrentDate=Sat Aug 20 21:20:29 CST 2022, processInfo='14424@hostname'}
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(158) - ### [执行SQL语句] connThreadId 113 自动提交
update task_lock
        set
        lock_flag = ?,
        begin_time = now(),
        process_info = ?
        where task_name = ?
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(159) - 当前已开启事务
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.statementExecuteBefore(166) - @@@ 执行SQL语句的连接ID（MySQL服务线程ID）与开启事务时的不同 113@[ds1] 112@[ds2]
2022-08-20 21:20:29.017 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:388)
org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor:123)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:163)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy:793)
org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy:218)
test.db.transaction.service.TransactionService$$FastClassBySpringCGLIB$$187f4c14.invoke(<generated>)
test.db.transaction.service.TransactionService.runByTransactionalDs2TM(TransactionService:89)
test.db.transaction.service.TransactionService.run(TransactionService:106)
test.db.transaction.service.TransactionService.doOperate(TransactionService:124)
com.sun.proxy.$Proxy41.updateLockFlagNoCheck(Unknown Source)
org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy:52)
org.apache.ibatis.binding.MapperMethod.execute(MapperMethod:54)
org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate:254)
com.sun.proxy.$Proxy39.update(Unknown Source)
org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate:358)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession:152)
org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor:71)
org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor:105)
org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor:48)
org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler:69)
org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler:44)
com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement:497)
com.alibaba.druid.proxy.jdbc.PreparedStatementProxyImpl.execute(PreparedStatementProxyImpl:167)
com.alibaba.druid.filter.FilterChainImpl.preparedStatement_execute(FilterChainImpl:3459)
com.alibaba.druid.filter.FilterEventAdapter.preparedStatement_execute(FilterEventAdapter:438)
test.db.druid_filter.filter.DruidMonitorFilter.statementExecuteBefore(DruidMonitorFilter:177)

2022-08-20 21:20:29.017 [main] INFO  TransactionService.doOperate(125) - 修改记录状态为锁定，更新行数 1 TEST_DB_TRANSACTION
2022-08-20 21:20:29.017 [main] INFO  TransactionService.run(107) - 执行结果 true
2022-08-20 21:20:29.017 [main] DEBUG DruidMonitorFilter.dataSource_releaseConnection(109) - ### [归还连接至连接池] connThreadId 113 自动提交 当前连接SQL语句执行次数: 2
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.033 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:407)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport:654)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager:711)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager:728)
org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCompletion(AbstractPlatformTransactionManager:926)
org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCompletion(TransactionSynchronizationUtils:108)
org.springframework.jdbc.datasource.DataSourceUtils$ConnectionSynchronization.beforeCompletion(DataSourceUtils:525)
org.springframework.jdbc.datasource.DataSourceUtils.releaseConnection(DataSourceUtils:360)
org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils:393)
org.springframework.jdbc.datasource.DataSourceUtils.doCloseConnection(DataSourceUtils:406)
com.alibaba.druid.pool.DruidPooledConnection.close(DruidPooledConnection:286)
com.alibaba.druid.filter.FilterChainImpl.dataSource_recycle(FilterChainImpl:5045)
test.db.druid_filter.filter.DruidMonitorFilter.dataSource_releaseConnection(DruidMonitorFilter:114)

2022-08-20 21:20:29.033 [main] DEBUG DruidMonitorFilter.connection_commit(188) - ### [提交事务] connThreadId 112 不自动提交 当前连接SQL语句执行次数: 0
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=false, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.033 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:407)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport:654)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager:711)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager:743)
org.springframework.jdbc.datasource.DataSourceTransactionManager.doCommit(DataSourceTransactionManager:333)
com.alibaba.druid.pool.DruidPooledConnection.commit(DruidPooledConnection:782)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.commit(ConnectionProxyImpl:122)
com.alibaba.druid.filter.FilterChainImpl.connection_commit(FilterChainImpl:194)
test.db.druid_filter.filter.DruidMonitorFilter.connection_commit(DruidMonitorFilter:195)

2022-08-20 21:20:29.033 [main] DEBUG DruidMonitorFilter.connection_setAutoCommit(242) - ### [开启自动提交] connThreadId 112 不自动提交
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=false, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.033 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:407)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport:654)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager:711)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager:790)
org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager:992)
org.springframework.jdbc.datasource.DataSourceTransactionManager.doCleanupAfterCompletion(DataSourceTransactionManager:378)
com.alibaba.druid.pool.DruidPooledConnection.setAutoCommit(DruidPooledConnection:740)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.setAutoCommit(ConnectionProxyImpl:429)
com.alibaba.druid.filter.FilterChainImpl.connection_setAutoCommit(FilterChainImpl:733)
test.db.druid_filter.filter.DruidMonitorFilter.connection_setAutoCommit(DruidMonitorFilter:253)

2022-08-20 21:20:29.033 [main] DEBUG DruidMonitorFilter.dataSource_releaseConnection(109) - ### [归还连接至连接池] connThreadId 112 自动提交 当前连接SQL语句执行次数: 0
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.033 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:70)
org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks:61)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:97)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner:251)
org.junit.runners.ParentRunner.runLeaf(ParentRunner:366)
org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat:84)
org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks:86)
org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters:27)
org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks:75)
org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks:84)
org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks:74)
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod:17)
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod:56)
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable:12)
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod:59)
java.lang.reflect.Method.invoke(Method:498)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl:43)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl:62)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
test.db.base.TestTransactionServiceBase.testPrintStackTrace2On(TestTransactionServiceBase:63)
test.db.base.TestTransactionServiceBase.commonOperate(TestTransactionServiceBase:49)
test.db.transaction.invalid.commit.transaction_manager.TestInvalidCommit_Ds1Mapper_Ds2TM.doTest(TestInvalidCommit_Ds1Mapper_Ds2TM:15)
test.db.transaction.service.TransactionService$$EnhancerBySpringCGLIB$$34a018c3.runByTransactionalDs2TM(<generated>)
org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy:708)
org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy:763)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation:186)
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor:119)
org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport:407)
org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport:654)
org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager:711)
org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager:790)
org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager:992)
org.springframework.jdbc.datasource.DataSourceTransactionManager.doCleanupAfterCompletion(DataSourceTransactionManager:391)
org.springframework.jdbc.datasource.DataSourceUtils.releaseConnection(DataSourceUtils:360)
org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection(DataSourceUtils:393)
org.springframework.jdbc.datasource.DataSourceUtils.doCloseConnection(DataSourceUtils:406)
com.alibaba.druid.pool.DruidPooledConnection.close(DruidPooledConnection:286)
com.alibaba.druid.filter.FilterChainImpl.dataSource_recycle(FilterChainImpl:5045)
test.db.druid_filter.filter.DruidMonitorFilter.dataSource_releaseConnection(DruidMonitorFilter:114)

2022-08-20 21:20:29.033 [main] DEBUG DruidMonitorFilter.connection_close(128) - ### [关闭连接] connThreadId 112 自动提交
SqlSessionInfo{connectionHashCode='7c4c2c0c', connThreadId=112, localPort=54355, dataSourceName='ds2', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.033 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:77)
org.springframework.test.context.TestContextManager.afterTestClass(TestContextManager:492)
org.springframework.test.context.support.DirtiesContextTestExecutionListener.afterTestClass(DirtiesContextTestExecutionListener:96)
org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener.beforeOrAfterTestClass(AbstractDirtiesContextTestExecutionListener:149)
org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener.dirtyContext(AbstractDirtiesContextTestExecutionListener:70)
org.springframework.test.context.support.DefaultTestContext.markApplicationContextDirty(DefaultTestContext:149)
org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.closeContext(DefaultCacheAwareContextLoaderDelegate:151)
org.springframework.test.context.cache.DefaultContextCache.remove(DefaultContextCache:172)
org.springframework.test.context.cache.DefaultContextCache.remove(DefaultContextCache:207)
org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext:1021)
org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext:1075)
org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext:1106)
org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory:1154)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry:520)
org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory:1161)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry:559)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry:587)
org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter:239)
com.alibaba.druid.pool.DruidDataSource.close(DruidDataSource:2118)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl:114)
com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl:181)
test.db.druid_filter.filter.DruidMonitorFilter.connection_close(DruidMonitorFilter:134)

2022-08-20 21:20:29.048 [main] DEBUG DruidMonitorFilter.connection_close(128) - ### [关闭连接] connThreadId 113 自动提交
SqlSessionInfo{connectionHashCode='7943cceb', connThreadId=113, localPort=54356, dataSourceName='ds1', autoCommit=true, serverIP='127.0.0.1', serverPort=3306, dbName='testdb', userName='test', serverVersion='5.5.5-10.0.36-MariaDB'}
2022-08-20 21:20:29.048 [main] INFO  CommonUtil.printStackTrace(59) - stack trace
com.intellij.rt.junit.JUnitStarter.main(JUnitStarter:54)
com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter:235)
com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner:33)
com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner:69)
org.junit.runner.JUnitCore.run(JUnitCore:137)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.junit.runners.ParentRunner$2.evaluate(ParentRunner:293)
org.junit.runners.ParentRunner.access$100(ParentRunner:66)
org.junit.runners.ParentRunner.runChildren(ParentRunner:329)
org.junit.runners.ParentRunner$1.schedule(ParentRunner:79)
org.junit.runners.ParentRunner$4.run(ParentRunner:331)
org.junit.runners.Suite.runChild(Suite:27)
org.junit.runners.Suite.runChild(Suite:128)
org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner:190)
org.junit.runners.ParentRunner.run(ParentRunner:413)
org.junit.runners.ParentRunner$3.evaluate(ParentRunner:306)
org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks:77)
org.springframework.test.context.TestContextManager.afterTestClass(TestContextManager:492)
org.springframework.test.context.support.DirtiesContextTestExecutionListener.afterTestClass(DirtiesContextTestExecutionListener:96)
org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener.beforeOrAfterTestClass(AbstractDirtiesContextTestExecutionListener:149)
org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener.dirtyContext(AbstractDirtiesContextTestExecutionListener:70)
org.springframework.test.context.support.DefaultTestContext.markApplicationContextDirty(DefaultTestContext:149)
org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.closeContext(DefaultCacheAwareContextLoaderDelegate:151)
org.springframework.test.context.cache.DefaultContextCache.remove(DefaultContextCache:172)
org.springframework.test.context.cache.DefaultContextCache.remove(DefaultContextCache:207)
org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext:1021)
org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext:1075)
org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext:1106)
org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory:1154)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry:520)
org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory:1161)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry:559)
org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry:587)
org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter:239)
com.alibaba.druid.pool.DruidDataSource.close(DruidDataSource:2118)
com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl.close(ConnectionProxyImpl:114)
com.alibaba.druid.filter.FilterChainImpl.connection_close(FilterChainImpl:181)
test.db.druid_filter.filter.DruidMonitorFilter.connection_close(DruidMonitorFilter:134)

2022-08-20 21:20:29.298 [main] DEBUG DruidMonitorFilter.initFilter(50) - 创建实例 test.db.druid_filter.filter.DruidMonitorFilter@71a9b4c7
2022-08-20 21:20:29.549 [main] INFO  TransactionService.setApplicationContext(48) - 当前进程信息 14424@hostname
